window.addEventListener("load", function () {
    const content = document.getElementById("content");
    const slider = document.getElementById("slider");
    const bodyBG = document.querySelector(".bodyBG");

    function adjustScroll() {
        slider.scrollTop = slider.scrollHeight;
        content.scrollTop = 0;
    }

    adjustScroll();
    window.addEventListener("resize", adjustScroll);

    let isScrolling = false;
    content.addEventListener("scroll", function () {
        if (!isScrolling) {
            isScrolling = true;
            requestAnimationFrame(() => {
                const scrollTop = content.scrollTop;
                const contentHeight = content.offsetHeight;
                const contentScrollHeight = content.scrollHeight;
                const sliderHeight = slider.offsetHeight;
                const sliderScrollHeight = slider.scrollHeight;
                const bodyWidth = bodyBG.offsetWidth;
                const bodyScrollWidth = bodyBG.scrollWidth;

                const maxContentScroll = Math.max(contentScrollHeight - contentHeight, 1);
                const maxSliderScroll = Math.max(sliderScrollHeight - sliderHeight, 1);

                const sliderScrollTop = Math.round(maxSliderScroll - (scrollTop * maxSliderScroll / maxContentScroll));
                const bodyScrollLeft = Math.round(scrollTop * Math.max(bodyScrollWidth - bodyWidth, 1) / maxContentScroll);

                if (slider.scrollTop !== sliderScrollTop) {
                    slider.scrollTop = sliderScrollTop;
                }
                if (bodyBG.scrollLeft !== bodyScrollLeft) {
                    bodyBG.scrollLeft = bodyScrollLeft;
                }

                isScrolling = false;
            });
        }
    });
});