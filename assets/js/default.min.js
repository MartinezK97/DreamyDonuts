document.addEventListener("DOMContentLoaded", function () {
    const contentAll = document.querySelector("#content-all");
    const scrollH = document.querySelector(".scrollH");
    const products = document.querySelectorAll(".product");
    const productImages = document.querySelectorAll(".product img");

    if (contentAll && scrollH && products.length > 0) {
        const productContentWidth = document.querySelector(".product-content").clientWidth;
        const contentScrollHeight = contentAll.scrollHeight - contentAll.clientHeight;
        const scrollHWidth = scrollH.scrollWidth - scrollH.clientWidth;

        contentAll.addEventListener("scroll", function () {
            const calcScrollH = (contentAll.scrollTop / contentScrollHeight) * scrollHWidth;
            scrollH.scrollLeft = calcScrollH;

            const rotation = (calcScrollH / (2 * Math.PI * (productContentWidth / 3))) * 360;
            productImages.forEach(img => {
                img.style.transform = `rotateZ(-${rotation}deg)`;
            });
        });
    } else {
        console.error("Error: No se encontraron los elementos necesarios o no tienen scroll.");
    }

    const portadaVideo = document.querySelector("#portada video");
    if (portadaVideo) {
        portadaVideo.playbackRate = 0.5;
        setInterval(() => {
            if (portadaVideo.playbackRate !== 0.75) {
                portadaVideo.playbackRate = 0.75;
            }
        }, 500);
    }
});